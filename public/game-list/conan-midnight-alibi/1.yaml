script:
  - scene: tasting_start
  - scene: lock_move
  - scene: blackout_moment
  - scene: body_found
  - scene: first_suspects
  - scene: handoff

scenes:
  tasting_start:
    actions:
      - bg: tea_room
      - music: tension
      - char:
          id: 하루오
          position: right
          emotion: scared
      - char:
          id: 신이치
          position: center
          emotion: cold
      - char:
          id: 코난
          position: left
          emotion: think
      - sound: notebook_flip
      - say:
          char: 신이치.cold
          with:
            - 하루오.scared
          text: "<speed=34>기록합니다.</speed> <speed=28>2번 잔은 하루오 씨가 직접 확인 후 보관.</speed>"
      - say:
          char: 하루오.scared
          with:
            - 신이치.cold
          text: "<speed=28>네... 잠금 서재에 넣어 두겠습니다.</speed>"
      - say:
          char: 코난.think
          text: "<speed=26>(피해자가 직접 잠그고 들어간다.)</speed> <speed=58>이건 완전한 밀실 전제야.</speed>"

  lock_move:
    actions:
      - bg: rain_corridor
      - char:
          id: 레이코
          position: right
          emotion: nervous
      - char:
          id: 켄지
          position: left
          emotion: angry
      - char:
          id: 코난
          position: center
          emotion: serious
      - sound: cup_clink
      - say:
          char: 레이코.nervous
          text: "<speed=30>2번 잔은 따로 식힘 조절을 했어요.</speed> <speed=24>뚜껑은 건드리지 말아 주세요.</speed>"
      - say:
          char: 켄지.angry
          text: "<speed=48>하루오! 빨리 끝내고 계약서 확인하자!</speed>"
      - say:
          char: 코난.serious
          text: "<speed=34>문은 안에서 잠겼다.</speed> <speed=30>이제 누가 어떻게 손대도 흔적이 남아야 한다.</speed>"

  blackout_moment:
    actions:
      - wait: 220
      - sound: thunder
      - effect: flash
      - effect: shake
      - sound: scream
      - char:
          id: 란
          position: left
          emotion: surprised
      - char:
          id: 코난
          position: center
          emotion: serious
      - say:
          char: 란.surprised
          with:
            - 코난.serious
          text: "<speed=86>꺄악!</speed> <speed=46>서재 안에서 비명이 났어!</speed>"
      - say:
          char: 코난.serious
          text: "<speed=76>전원 정지!</speed> <speed=34>문과 창문에서 떨어져!</speed>"

  body_found:
    actions:
      - bg: tea_room
      - sticker:
          id: tape_lock
          image: police_tape
          x: 50
          y: 52
          width: 92
          anchorX: center
          anchorY: center
          zIndex: 5
          enter:
            effect: wipeCenterX
      - char:
          id: 코고로
          position: right
          emotion: angry
      - char:
          id: 코난
          position: center
          emotion: serious
      - say:
          char: 코고로.angry
          with:
            - 코난.serious
          text: "<speed=42>피해자 하루오, 현장 사망 확인!</speed> <speed=34>지금부터 전원 용의자다!</speed>"
      - sticker:
          id: dying_mark
          image: clue_lid
          x: 50
          y: 42
          width: 54
          anchorX: center
          anchorY: center
          enter:
            effect: blurIn
      - say:
          char: 코난.serious
          text: '<speed=34>컵받침에 젖은 손가락으로</speed> <speed=72>"2R"</speed> <speed=34>이 남아 있어...</speed>'
      - say:
          char: 코난.think
          text: "<speed=24>(너무 노골적이야.)</speed> <speed=62>진짜 유언일 수도, 누가 심은 미끼일 수도 있다.</speed>"
      - clearSticker:
          id: dying_mark
          leave:
            effect: fadeOut
      - clearSticker:
          id: tape_lock
          leave:
            effect: wipeRight

  first_suspects:
    actions:
      - bg: case_board
      - char:
          id: 코난
          position: center
          emotion: serious
      - char:
          id: 란
          position: left
          emotion: worried
      - say:
          char: 코난.serious
          text: "<speed=38>용의선상은 세 명.</speed> <speed=30>레이코, 켄지, 신이치.</speed>"
      - say:
          char: 란.worried
          text: "<speed=30>다들 피해자랑 다퉜던 사람들...</speed>"
      - say:
          char: 코난.think
          text: "<speed=26>(감정만으론 못 잡아.)</speed> <speed=58>시간표와 기계 구조로 밀실을 부순다.</speed>"

  handoff:
    actions:
      - add:
          deduction_score: 1
          final_confidence: 1
      - say:
          char: 코난
          text: "<speed=52>초동 감식으로 넘어간다.</speed> <speed=34>증거부터 확보하자.</speed>"
      - goto: ./2.yaml
