script:
  - scene: trip_open
  - scene: ryokan_welcome
  - scene: tea_invite
  - scene: tasting_room_prelude
  - scene: weather_shift
  - scene: rain_hook
  - scene: object_flash
  - scene: blackout_title
  - scene: handoff

scenes:
  trip_open:
    actions:
      - bg: ryokan_hall
      - char:
          id: 란
          position: left
      - char:
          id: 코난
          position: center
      - char:
          id: 코고로
          position: right
          emotion: proud
      - sound: door
      - say:
          char: 란
          with:
            - 코난
            - 코고로.proud
          text: "와... 공기 진짜 좋다. 오랜만에 사건 생각 안 하고 쉬는 날 같아."
      - say:
          char: 코고로.proud
          with:
            - 란
          text: "하하! 오늘은 의뢰도 추리도 없다! 명탐정 모리 코고로는 귀빈 모드라고!"
      - say:
          char: 코난.think
          with:
            - 란
            - 코고로.proud
          text: "(이런 날일수록 이상하리만큼 조용해... 보통은 폭풍 전의 정적이지.)"

  ryokan_welcome:
    actions:
      - bg: tea_room
      - char:
          id: 켄지
          position: left
      - char:
          id: 신이치
          position: center
      - char:
          id: 레이코
          position: right
      - say:
          char: 레이코
          with:
            - 켄지
            - 신이치
          text: "와주셔서 감사합니다. 오늘은 공동 블렌드 완성 기념 시음회이자 최종 확인 자리예요."
      - say:
          char: 켄지
          with:
            - 레이코
            - 신이치
          text: "계약 정리만 끝나면 바로 공개다. 오늘은 잡음 없이 가자고."
      - say:
          char: 신이치
          with:
            - 켄지
            - 레이코
          text: "문서 대조 후 바로 시음으로 넘어가죠. 순서는 이미 정해뒀습니다."

  tea_invite:
    actions:
      - char:
          id: 코난
          position: center
          emotion: think
      - char:
          id: 란
          position: left
      - char:
          id: 레이코
          position: right
      - say:
          char: 란
          with:
            - 코난.think
            - 레이코
          text: "아하, 그래서 다들 모인 거구나. 단순한 회의가 아니라 기념 시음회였네."
      - say:
          char: 레이코
          with:
            - 란
            - 코난.think
          text: "네. 료칸 주인님이 직접 코스를 준비하셨어요. 첫 잔은 축하용으로 맞춰뒀고요."
      - say:
          char: 코난.think
          with:
            - 란
            - 레이코
          text: "(축하 자리, 정해진 순서, 정교한 준비... 누군가 판을 만들기 딱 좋은 조건이야.)"

  tasting_room_prelude:
    actions:
      - bg: tea_room
      - char:
          id: 하루오
          position: right
      - char:
          id: 코고로
          position: left
          emotion: proud
      - sound: cup_clink
      - say:
          char: 하루오
          with:
            - 코고로.proud
          text: "...잔 준비됐습니다. 향부터 천천히 보시면 됩니다."
      - say:
          char: 코고로.proud
          with:
            - 하루오
          text: "좋아! 오늘은 휴식이다, 휴식! 다들 긴장 풀고 한 잔씩 하자고!"
      - wait: 260

  weather_shift:
    actions:
      - bg: rain_corridor
      - music: reasoning
      - effect: blur
      - sound: thunder
      - char:
          id: 코난
          position: center
          emotion: think
      - say:
          char: 코난.think
          text: "(해가 지자 폭우가 복도를 때렸어... 공기 자체가 무겁게 가라앉고 있어.)"

  rain_hook:
    actions:
      - bg: rain_corridor
      - say:
          char: 코난.think
          text: "(방금 전까지 웃고 있었어... 누가, 언제, 이 흐름을 비틀었지?)"
      - say:
          char: 코난.serious
          text: "(좋아. 지금부터 보이는 모든 장면, 한 프레임도 놓치지 않는다.)"
      - wait: 320

  object_flash:
    actions:
      - bg: tea_room
      - effect: zoom
      - sticker:
          id: lid_cut
          image: clue_cup
          x: 50
          y: 36
          width: 62
          anchorX: center
          anchorY: center
          enter:
            effect: blurIn
            duration: 380
      - sound: cup_clink
      - say:
          text: "챙-! 단서가 머릿속에서 맞물리는 소리가 났다."
      - say:
          char: 코난.think
          text: "(손수건, 뚜껑 두 번... 둘 중 하나는 반드시 누군가가 의도적으로 보여 준 미끼야.)"
      - clearSticker:
          id: lid_cut
          leave:
            effect: fadeOut
            duration: 220
      - wait: 280

  blackout_title:
    actions:
      - effect: darken
      - sound: scream
      - wait: 220
      - say:
          text: "명탐정 코난 외전: 다실의 비밀"

  handoff:
    actions:
      - goto: /1.yaml
