script:
  - scene: meeting_start
  - scene: four_way_tension
  - scene: service_order
  - scene: incident_trigger
  - scene: death_confirm
  - scene: contradiction_hook
  - scene: chapter_handoff

scenes:
  meeting_start:
    actions:
      - bg: tea_room
      - music: reasoning
      - char:
          id: 켄지
          position: left
          emotion: angry
      - char:
          id: 신이치
          position: center
          emotion: cold
      - char:
          id: 레이코
          position: right
          emotion: nervous
      - say:
          char: 레이코.nervous
          text: "<speed=42>오늘은 마지막 시제품 확인과 계약 확정 자리예요.</speed> <speed=30>실수 없이 끝내고 싶어요.</speed>"
      - say:
          char: 켄지.angry
          text: "<speed=56>실수는 이미 나왔어.</speed> <speed=34>누가 계약 조항을 몰래 바꿨지?</speed>"
      - say:
          char: 신이치.cold
          text: "<speed=34>감정 대신 순서.</speed> <speed=28>먼저 시음, 다음 서명, 마지막 대조.</speed>"

  four_way_tension:
    actions:
      - char:
          id: 하루오
          position: right
          emotion: scared
      - char:
          id: 코난
          position: center
          emotion: think
      - char:
          id: 란
          position: left
          emotion: worried
      - say:
          char: 하루오.scared
          with:
            - 코난.think
          text: "<speed=32>...4잔 준비했습니다.</speed> <speed=26>번호표는 1, 2, 3, 4 순서입니다.</speed>"
      - say:
          char: 란.worried
          text: "<speed=40>분위기가 너무 날카로워...</speed> <speed=28>축하 자리 맞지?</speed>"
      - say:
          char: 코난.think
          text: "<speed=26>(네 사람의 시선이 서로를 찌른다.)</speed> <speed=58>누군가는 이미 결심했어.</speed>"

  service_order:
    actions:
      - sound: notebook_flip
      - char:
          id: 신이치
          position: center
          emotion: cold
      - char:
          id: 하루오
          position: right
          emotion: scared
      - say:
          char: 신이치.cold
          with:
            - 하루오.scared
          text: "<speed=34>피해자 후보 컵은 2번.</speed> <speed=30>기록표에 적습니다.</speed>"
      - sound: cup_clink
      - say:
          char: 하루오.scared
          with:
            - 신이치.cold
          text: "<speed=30>...2번 잔, 중앙에 놓겠습니다.</speed> <speed=44>뚜껑은 열지 마세요.</speed>"
      - say:
          text: "<speed=24>주전자 뚜껑이</speed> <speed=58>한 번,</speed> <speed=86>그리고 다시 한 번</speed> <speed=34>눌렸다.</speed>"
      - say:
          char: 코난.think
          text: "<speed=24>(두 번?</speed> <speed=62>보여 주기식 동작이야.)</speed>"

  incident_trigger:
    actions:
      - wait: 220
      - sound: scream
      - effect: flash
      - effect: darken
      - effect: shake
      - sound: thunder
      - char:
          id: 란
          position: left
          emotion: surprised
      - char:
          id: 코난
          position: center
          emotion: serious
      - say:
          char: 란.surprised
          with:
            - 코난.serious
          text: "<speed=84>꺄악!</speed> <speed=44>하루오 씨가 쓰러졌어!</speed>"
      - say:
          char: 코난.serious
          text: "<speed=80>모두 멈춰!</speed> <speed=34>컵과 탁자에서 떨어져!</speed>"

  death_confirm:
    actions:
      - bg: tea_room
      - sticker:
          id: tape_lock
          image: police_tape
          x: 50
          y: 52
          width: 92
          anchorX: center
          anchorY: center
          zIndex: 5
          enter:
            effect: wipeCenterX
      - char:
          id: 코고로
          position: right
          emotion: angry
      - char:
          id: 코난
          position: center
          emotion: serious
      - say:
          text: "<speed=34>피해자는</speed> <speed=72>하루오 씨.</speed> <speed=34>현장에서 사망이 확인됐다.</speed>"
      - say:
          char: 코고로.angry
          with:
            - 코난.serious
          text: "<speed=40>피해자 하루오, 맥박 없음...</speed> <speed=72>사망 확인이다.</speed> <speed=34>이제부터 전원 현장 이탈 금지!</speed>"
      - sticker:
          id: dying_hint
          image: clue_lid
          x: 51
          y: 44
          width: 58
          anchorX: center
          anchorY: center
          enter:
            effect: blurIn
      - say:
          char: 코난.serious
          text: '<speed=34>컵받침에 젖은 손가락으로</speed> <speed=72>"2R"</speed> <speed=34>이 남아 있어.</speed>'
      - say:
          char: 코난.think
          text: "<speed=24>(다잉 메시지다...)</speed> <speed=30>하지만 너무 깔끔해.</speed> <speed=62>누군가 손을 댔다.</speed>"
      - clearSticker:
          id: dying_hint
          leave:
            effect: fadeOut
      - clearSticker:
          id: tape_lock
          leave:
            effect: wipeRight
      - add:
          deduction_score: 1

  contradiction_hook:
    actions:
      - bg: case_board
      - effect: zoom
      - say:
          char: 코난.serious
          text: "<speed=42>모순은 두 개.</speed> <speed=30>뚜껑 두 번과 젖은 가장자리.</speed> <speed=62>하나는 연막이고 하나는 살인 수단이다.</speed>"
      - say:
          char: 코난.think
          text: '<speed=24>(그리고 "2R"...)</speed> <speed=62>진짜 유언인지, 가짜 각본인지 지금부터 가른다.</speed>'

  chapter_handoff:
    actions:
      - effect: pulse
      - say:
          char: 코난
          text: "<speed=52>초동 정리 시작.</speed> <speed=34>시간선부터 고정한다.</speed>"
      - goto: ./2.yaml
